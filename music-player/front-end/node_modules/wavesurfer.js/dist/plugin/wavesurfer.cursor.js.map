{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*****","webpack:///webpack/bootstrap 212862eb802a8640f50e?d7b5*****","webpack:///./src/plugin/cursor.js"],"names":["CursorPlugin","params","name","deferInit","staticProps","enableCursor","console","warn","initPlugins","instance","ws","wavesurfer","style","util","_onDrawerCreated","drawer","wrapper","_onMousemove","updateCursorPosition","handleEvent","e","addEventListener","_onMouseenter","showCursor","_onMouseleave","hideCursor","cursor","appendChild","document","createElement","position","zIndex","left","top","bottom","width","display","borderRightStyle","borderRightWidth","borderRightColor","opacity","pointerEvents","on","un","parentNode","removeChild","removeEventListener","progress","pos","Math","round","pixelRatio"],"mappings":"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","file":"wavesurfer.cursor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cursor\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cursor\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"cursor\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"localhost:8080/dist/plugin/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 212862eb802a8640f50e","/**\n * @typedef {Object} CursorPluginParams\n * @property {?boolean} deferInit Set to true to stop auto init in `addPlugin()`\n */\n\n/**\n * Displays a thin line at the position of the cursor on the waveform.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import CursorPlugin from 'wavesurfer.cursor.js';\n *\n * // commonjs\n * var CursorPlugin = require('wavesurfer.cursor.js');\n *\n * // if you are using <script> tags\n * var CursorPlugin = window.WaveSurfer.cursor;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     CursorPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class CursorPlugin {\n    /**\n     * Cursor plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param  {CursorPluginParams} params parameters use to initialise the\n     * plugin\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'cursor',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                enableCursor() {\n                    console.warn('Deprecated enableCursor!');\n                    this.initPlugins('cursor');\n                }\n            },\n            instance: CursorPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.wavesurfer = ws;\n        this.style = ws.util.style;\n        this._onDrawerCreated = () => {\n            this.drawer = this.wavesurfer.drawer;\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n\n            this._onMousemove = e => this.updateCursorPosition(this.drawer.handleEvent(e));\n            this.wrapper.addEventListener('mousemove', this._onMousemove);\n\n            this._onMouseenter = () => this.showCursor();\n            this.wrapper.addEventListener('mouseenter', this._onMouseenter);\n\n            this._onMouseleave = () => this.hideCursor();\n            this.wrapper.addEventListener('mouseleave', this._onMouseleave);\n\n            this.cursor = this.wrapper.appendChild(\n                this.style(document.createElement('wave'), {\n                    position: 'absolute',\n                    zIndex: 3,\n                    left: 0,\n                    top: 0,\n                    bottom: 0,\n                    width: '0',\n                    display: 'block',\n                    borderRightStyle: 'solid',\n                    borderRightWidth: 1 + 'px',\n                    borderRightColor: 'black',\n                    opacity: '.25',\n                    pointerEvents: 'none'\n                })\n            );\n        };\n    }\n\n    init() {\n        // drawer already existed, just call initialisation code\n        if (this.wavesurfer.drawer) {\n            this._onDrawerCreated();\n        }\n\n        // the drawer was initialised, call the initialisation code\n        this.wavesurfer.on('drawer-created', this._onDrawerCreated);\n    }\n\n    destroy() {\n        this.wavesurfer.un('drawer-created', this._onDrawerCreated);\n\n        // if cursor was appended, remove it\n        if (this.cursor) {\n            this.cursor.parentNode.removeChild(this.cursor);\n        }\n\n        // if the drawer existed (the cached version referenced in the init code),\n        // remove the event listeners attached to it\n        if (this.drawer) {\n            this.wrapper.removeEventListener('mousemove', this._onMousemove);\n            this.wrapper.removeEventListener('mouseenter', this._onMouseenter);\n            this.wrapper.removeEventListener('mouseleave', this._onMouseleave);\n        }\n    }\n\n    updateCursorPosition(progress) {\n        const pos = Math.round(this.drawer.width * progress) / this.drawer.params.pixelRatio - 1;\n        this.style(this.cursor, {\n            left: `${pos}px`\n        });\n    }\n\n    showCursor() {\n        this.style(this.cursor, {\n            display: 'block'\n        });\n    }\n\n    hideCursor() {\n        this.style(this.cursor, {\n            display: 'none'\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugin/cursor.js"],"sourceRoot":""}